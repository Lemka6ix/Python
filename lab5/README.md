```python
n = int(input())
matrix = [list(map(int, input().split())) for _ in range(n)]

def spiral_generator(matrix):
    n = len(matrix)
    x, y = n // 2, n // 2
    dx, dy = 0, 1
    step = 1
    count = 1
    yield matrix[x][y], x, y
    while count < n * n:
        for _ in range(step):
            x += dx
            y += dy
            if 0 <= x < n and 0 <= y < n:
                yield matrix[x][y], x, y
                count += 1
            else:
                return
        dx, dy = dy, -dx
        if dx == 0:
            step += 1

gen = spiral_generator(matrix)
filtered = filter(lambda elem: elem[0] % 2 == (elem[1] + elem[2]) % 2, gen)
result = list(map(lambda elem: elem[0], filtered))

print(' '.join(map(str, result)))
```

# Как работает

1. **Ввод матрицы**: Сначала считывается размер матрицы n, затем построчно вводятся элементы матрицы.

2. **Генератор спирального обхода** `spiral_generator`:

    * Начинает обход из центра матрицы (позиция `[n//2, n//2]`)

    * Использует систему направлений для движения по спирали (вправо, вниз, влево, вверх)

    * После каждого "витка" спирали увеличивает длину шага

    * Генерирует кортежи (значение, индекс_строки, индекс_столбца)

3. **Фильтрация элементов**:

    * Применяется filter() для отбора элементов, у которых четность значения совпадает с четностью суммы индексов

    * Используется лямбда-функция для проверки условия: `elem[0] % 2 == (elem[1] + elem[2]) % 2`

4. **Преобразование результатов**:

    * Применяется `map()` для извлечения только значений из отфильтрованных кортежей

    * Результаты выводятся в строку через пробел

## Результаты работы программы

![result1](https://github.com/Lemka6ix/Python/blob/main/lab5/incorrect.png)

### Пояснение

#### Как работает проверка четности?

**Условие фильтрации:**

```python
# elem = (значение, индекс_строки, индекс_столбца)
elem[0] % 2 == (elem[1] + elem[2]) % 2
```
**Это означает:**

* *значение* % 2 - четность самого числа

* `(i + j) % 2` - четность суммы индексов

**Пример проверки:**
Например, для элемента `[1,2]` со значением `7`:

* `7 % 2 = 1` (нечетное)

* `(1 + 2) % 2 = 3 % 2 = 1` (нечетная сумма)

* `1 == 1` ✓ (добавляем в результат) 


![result2](https://github.com/Lemka6ix/Python/blob/main/lab5/correct.png)